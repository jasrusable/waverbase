<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Hello Thrift</title>
  </head>
  <body>
    Name: <input type="text" id="name_in">
    <input type="button" id="get_msg" value="Get Message" >
    <div id="output"></div>

    <script src="thrift.js"></script>
    <script src="gen-js/mongo_svc.js"></script>
    <script src="gen-js/mongo-dashboard_types.js"></script>
    <script>
      (function() {
        var transport = new Thrift.TXHRTransport("http://localhost:9099/mongo");
        var protocol = new Thrift.TJSONProtocol(transport);
        var client = new mongo_svcClient(protocol);
        var nameElement = document.getElementById("name_in");
        var outputElement = document.getElementById("output");
        
        var options = new FindOptions();
        options.skip = 3;
        options.limit = 2;
        options.query = new Query();
        options.query.filter = JSON.stringify({});
        options.query.fields = "{\"price\":1, \"_id\"\:0}";

        var update = {$unset:{itemNamez:""}};
        // {$set:{
        //   itemNamez: "Not cocaine"
        // }};
        update = JSON.stringify(update);

        var selector = {itemName:"Cocaine"};
        selector = JSON.stringify(selector);

        document.getElementById("get_msg")
          .addEventListener("click", function(){
            client.deleteDocuments(nameElement.value, 'fluff','fluff', selector, function(result) {
              console.log(result);
              outputElement.innerHTML = result;
            });
          });
      })();
    </script>
  </body>
</html>