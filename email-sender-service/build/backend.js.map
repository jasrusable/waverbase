{"version":3,"sources":["webpack:///webpack/bootstrap aec8e37e810d3d6adffe","webpack:///external \"babel-polyfill\"","webpack:///./src/main.js","webpack:///external \"mailgun-js\"","webpack:///external \"thrift\"","webpack:///external \"es6-promisify\"","webpack:///./email-sender.thrift","webpack:///external \"winston\"","webpack:///external \"assert\""],"names":[],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA,4C;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;AAKA,KAAM,UAAU,yBAAQ,EAAC,QAAQ,QAAQ,GAAR,CAAY,eAAZ,EAA6B,QAAQ,QAAQ,GAAR,CAAY,cAAZ,EAAtD,CAAV;;AAEN,KAAM,UAAU;AACd,cAAW,mBAAS,WAAT,EAAsB,SAAtB,EAAiC,OAAjC,EAA0C,IAA1C,EAAgD,MAAhD,EAAwD;AACjE,uBAAQ,IAAR,yBAAmC,uBAAkB,SAArD,EADiE;AAEjE,SAAM,WAAW,QAAQ,QAAR,EAAX,CAF2D;AAGjE,iCAAU,SAAS,IAAT,CAAV,CAAyB,IAAzB,CAA8B,QAA9B,EAAwC;AACtC,WAAI,SAAJ;AACA,aAAM,WAAN;AACA,gBAAS,OAAT;AACA,aAAM,IAAN;MAJF,EAKG,IALH,CAKQ,UAAS,IAAT,EAAe;AACrB,yBAAQ,IAAR,CAAa,IAAb,EADqB;AAErB,cAAO,IAAP,EAAa,IAAb,EAFqB;MAAf,CALR,CAQG,KARH,CAQS,UAAS,KAAT,EAAgB;AACvB,yBAAQ,KAAR,CAAc,KAAd,EADuB;AAEvB,cAAO,IAAP,EAAa,KAAb,EAFuB;MAAhB,CART,CAHiE;IAAxD;EADP;;AAmBN,KAAI,SAAS,iBAAO,YAAP,wBAAiC,OAAjC,CAAT;;AAEJ,QAAO,MAAP,CAAc,QAAQ,GAAR,CAAY,yBAAZ,CAAd;AACA,mBAAQ,IAAR,CAAa,+BAAb,EAA8C,QAAQ,GAAR,CAAY,yBAAZ,CAA9C,C;;;;;;AClCA,wC;;;;;;ACAA,oC;;;;;;ACAA,2C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yEAAwE,gBAAgB;AACxF;AACA;AACA;AACA;AACA,IAAG;AACH;;;;AAIA;AACA,+C;;;;;;AC5NA,qC;;;;;;ACAA,oC","file":"backend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap aec8e37e810d3d6adffe\n **/","module.exports = require(\"babel-polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-polyfill\"\n ** module id = 1\n ** module chunks = 0\n **/","import Mailgun from 'mailgun-js';\nimport thrift from 'thrift';\nimport promisify from 'es6-promisify';\nimport EmailSender from '!exports-loader?Processor=EmailSenderProcessor!thrift-loader?generator=js:node!../email-sender.thrift';\nimport winston from 'winston';\nimport assert from 'assert';\n\n// const API_KEY = 'key-18acefbb0db248da44accc2018281765';\n// const DOMAIN = 'sandboxa96b81d3f5644263a37223d4acc98058.mailgun.org';\n\nconst mailgun = Mailgun({apiKey: process.env.MAILGUN_API_KEY, domain: process.env.MAILGUN_DOMAIN});\n\nconst handler = {\n  sendEmail: function(fromAddress, toAddress, subject, body, result) {\n    winston.info(`Sending email from ${fromAddress} to ${toAddress}`);\n    const messages = mailgun.messages();\n    promisify(messages.send).bind(messages)({\n      to: toAddress,\n      from: fromAddress,\n      subject: subject,\n      text: body,\n    }).then(function(body) {\n      winston.info(body);\n      result(null, null);\n    }).catch(function(error) {\n      winston.error(error);\n      result(null, error);\n    })\n  }\n};\n\nvar server = thrift.createServer(EmailSender, handler);\n\nserver.listen(process.env.EMAIL_SENDER_SERVICE_PORT);\nwinston.info('Thrift server running on port', process.env.EMAIL_SENDER_SERVICE_PORT);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","module.exports = require(\"mailgun-js\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mailgun-js\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"thrift\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"thrift\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"es6-promisify\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"es6-promisify\"\n ** module id = 5\n ** module chunks = 0\n **/","//\n// Autogenerated by Thrift Compiler (0.9.1)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\nvar Thrift = require('thrift').Thrift;\n\n// module.exports types statement removed.\n\n//\n// Autogenerated by Thrift Compiler (0.9.1)\n//\n// DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING\n//\nvar Thrift = require('thrift').Thrift;\n\n// require() types statement removed.\n//HELPER FUNCTIONS AND STRUCTURES\n\nEmailSender_sendEmail_args = function(args) {\n  this.fromAddress = null;\n  this.toAddress = null;\n  this.subject = null;\n  this.body = null;\n  if (args) {\n    if (args.fromAddress !== undefined) {\n      this.fromAddress = args.fromAddress;\n    }\n    if (args.toAddress !== undefined) {\n      this.toAddress = args.toAddress;\n    }\n    if (args.subject !== undefined) {\n      this.subject = args.subject;\n    }\n    if (args.body !== undefined) {\n      this.body = args.body;\n    }\n  }\n};\nEmailSender_sendEmail_args.prototype = {};\nEmailSender_sendEmail_args.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    switch (fid)\n    {\n      case 1:\n      if (ftype == Thrift.Type.STRING) {\n        this.fromAddress = input.readString();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 2:\n      if (ftype == Thrift.Type.STRING) {\n        this.toAddress = input.readString();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 3:\n      if (ftype == Thrift.Type.STRING) {\n        this.subject = input.readString();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      case 4:\n      if (ftype == Thrift.Type.STRING) {\n        this.body = input.readString();\n      } else {\n        input.skip(ftype);\n      }\n      break;\n      default:\n        input.skip(ftype);\n    }\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nEmailSender_sendEmail_args.prototype.write = function(output) {\n  output.writeStructBegin('EmailSender_sendEmail_args');\n  if (this.fromAddress !== null && this.fromAddress !== undefined) {\n    output.writeFieldBegin('fromAddress', Thrift.Type.STRING, 1);\n    output.writeString(this.fromAddress);\n    output.writeFieldEnd();\n  }\n  if (this.toAddress !== null && this.toAddress !== undefined) {\n    output.writeFieldBegin('toAddress', Thrift.Type.STRING, 2);\n    output.writeString(this.toAddress);\n    output.writeFieldEnd();\n  }\n  if (this.subject !== null && this.subject !== undefined) {\n    output.writeFieldBegin('subject', Thrift.Type.STRING, 3);\n    output.writeString(this.subject);\n    output.writeFieldEnd();\n  }\n  if (this.body !== null && this.body !== undefined) {\n    output.writeFieldBegin('body', Thrift.Type.STRING, 4);\n    output.writeString(this.body);\n    output.writeFieldEnd();\n  }\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nEmailSender_sendEmail_result = function(args) {\n};\nEmailSender_sendEmail_result.prototype = {};\nEmailSender_sendEmail_result.prototype.read = function(input) {\n  input.readStructBegin();\n  while (true)\n  {\n    var ret = input.readFieldBegin();\n    var fname = ret.fname;\n    var ftype = ret.ftype;\n    var fid = ret.fid;\n    if (ftype == Thrift.Type.STOP) {\n      break;\n    }\n    input.skip(ftype);\n    input.readFieldEnd();\n  }\n  input.readStructEnd();\n  return;\n};\n\nEmailSender_sendEmail_result.prototype.write = function(output) {\n  output.writeStructBegin('EmailSender_sendEmail_result');\n  output.writeFieldStop();\n  output.writeStructEnd();\n  return;\n};\n\nEmailSenderClient = exports.Client = function(output, pClass) {\n    this.output = output;\n    this.pClass = pClass;\n    this.seqid = 0;\n    this._reqs = {};\n};\nEmailSenderClient.prototype = {};\nEmailSenderClient.prototype.sendEmail = function(fromAddress, toAddress, subject, body, callback) {\n  this.seqid += 1;\n  this._reqs[this.seqid] = callback;\n  this.send_sendEmail(fromAddress, toAddress, subject, body);\n};\n\nEmailSenderClient.prototype.send_sendEmail = function(fromAddress, toAddress, subject, body) {\n  var output = new this.pClass(this.output);\n  output.writeMessageBegin('sendEmail', Thrift.MessageType.CALL, this.seqid);\n  var args = new EmailSender_sendEmail_args();\n  args.fromAddress = fromAddress;\n  args.toAddress = toAddress;\n  args.subject = subject;\n  args.body = body;\n  args.write(output);\n  output.writeMessageEnd();\n  return this.output.flush();\n};\n\nEmailSenderClient.prototype.recv_sendEmail = function(input,mtype,rseqid) {\n  var callback = this._reqs[rseqid] || function() {};\n  delete this._reqs[rseqid];\n  if (mtype == Thrift.MessageType.EXCEPTION) {\n    var x = new Thrift.TApplicationException();\n    x.read(input);\n    input.readMessageEnd();\n    return callback(x);\n  }\n  var result = new EmailSender_sendEmail_result();\n  result.read(input);\n  input.readMessageEnd();\n\n  callback(null)\n};\nEmailSenderProcessor = exports.Processor = function(handler) {\n  this._handler = handler\n}\nEmailSenderProcessor.prototype.process = function(input, output) {\n  var r = input.readMessageBegin();\n  if (this['process_' + r.fname]) {\n    return this['process_' + r.fname].call(this, r.rseqid, input, output);\n  } else {\n    input.skip(Thrift.Type.STRUCT);\n    input.readMessageEnd();\n    var x = new Thrift.TApplicationException(Thrift.TApplicationExceptionType.UNKNOWN_METHOD, 'Unknown function ' + r.fname);\n    output.writeMessageBegin(r.fname, Thrift.MessageType.Exception, r.rseqid);\n    x.write(output);\n    output.writeMessageEnd();\n    output.flush();\n  }\n}\n\nEmailSenderProcessor.prototype.process_sendEmail = function(seqid, input, output) {\n  var args = new EmailSender_sendEmail_args();\n  args.read(input);\n  input.readMessageEnd();\n  this._handler.sendEmail(args.fromAddress, args.toAddress, args.subject, args.body, function (err, result) {\n    var result = new EmailSender_sendEmail_result((err != null ? err : {success: result}));\n    output.writeMessageBegin(\"sendEmail\", Thrift.MessageType.REPLY, seqid);\n    result.write(output);\n    output.writeMessageEnd();\n    output.flush();\n  })\n}\n\n\n\n/*** EXPORTS FROM exports-loader ***/\nexports[\"Processor\"] = (EmailSenderProcessor);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/exports-loader?Processor=EmailSenderProcessor!../thrift-loader?generator=js:node!./email-sender.thrift\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"winston\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"winston\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"assert\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"assert\"\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}