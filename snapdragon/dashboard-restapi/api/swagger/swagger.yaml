swagger: "2.0"
info:
  version: "0.0.1"
  title: Dashboard RestAPI
# during dev, should point to your local machine
host: localhost:10010
# basePath prefixes all resource paths 
basePath: /
# 
schemes:
  # tip: remove http to make production-grade
  - http
  - https
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
paths:
  /collections:
    x-swagger-router-controller: collections
    get:
      description: Returns this apps Mongo collections
      operationId: getCollectionNames
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionsResponse"
  /collections/{name}:
    x-swagger-router-controller: collections
    get:
      description: Get schema of a specific collection
      operationId: getCollection
      parameters:
        - name: name
          in: path
          description: Name of the collection
          required: true
          type: string
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionsSchemaResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
    post:
      description: Insert a document into this collection.
      operationId: putCollection
      consumes:
        - application/json
      parameters:
        - name: name
          in: path
          description: Name of the collection
          required: true
          type: string
        - name: documents
          in: body
          description: A JSON array storing documents to be inserted into the specified collection
          schema:
            $ref: "#/definitions/Documents"
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/CollectionInsertResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"
  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
  Document:
    type: object
  Documents:
    type: array
    items:
      $ref: "#/definitions/Document"
  Collection:
    type: string
    description: The name of a collection
  CollectionsResponse:
    required:
      - collections
    properties:
      collections:
        type: array
        items:
          $ref: "#/definitions/Collection"
        description: All this apps collections
  CollectionsSchemaResponse:
    required:
      - collectionSchema
      - size
    properties:
      collectionSchema: 
        type: object
        description: The schema of the collection
      size:
        type: number
        description: The number of documents in the collection
  CollectionInsertResponse:
    required:
      - message
    properties:
      message:
        type: string
  ErrorResponse:
    required:
      - message
    properties:
      message:
        type: string
